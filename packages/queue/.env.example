# Game View Queue Worker - Environment Variables
# These are required for running the processing worker

# ============================================
# REDIS (Upstash)
# ============================================
# Get from Upstash Console → Your Database → Details
# Use "rediss://" (with double 's') for TLS connections
REDIS_URL="rediss://default:[password]@[region]-[id].upstash.io:6379"

# OR for local Redis development:
# REDIS_HOST="localhost"
# REDIS_PORT="6379"
# REDIS_PASSWORD=""

# ============================================
# DATABASE (Supabase PostgreSQL)
# ============================================
# Worker needs database access to update job status
DATABASE_URL="postgresql://postgres.[project-ref]:[password]@aws-0-us-east-1.pooler.supabase.com:5432/postgres"

# ============================================
# STORAGE (Supabase)
# ============================================
# For uploading processed outputs (PLY files, thumbnails)
NEXT_PUBLIC_SUPABASE_URL="https://[project-ref].supabase.co"
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# ============================================
# PROCESSING ENGINE
# ============================================
# Path to gvcore-cli binary (video-to-3DGS processor)
GVCORE_CLI_PATH="/usr/local/bin/gvcore-cli"

# Path to Brush installation (3D Gaussian Splatting trainer)
BRUSH_PATH="/opt/brush"

# Working directory for temporary files
WORK_DIR="/tmp/gv-processing"

# ============================================
# WORKER SETTINGS
# ============================================
# Number of concurrent jobs (set based on GPU memory)
# 1 = single job at a time (recommended for single GPU)
WORKER_CONCURRENCY="1"

# Maximum job timeout in milliseconds (default: 2 hours)
JOB_TIMEOUT="7200000"

# Enable verbose logging
DEBUG="bullmq:*"
