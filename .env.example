# Game View Platform - Environment Variables
# Copy this file to .env.local and fill in your values

# ============================================
# DATABASE (Supabase PostgreSQL)
# ============================================
# DATABASE_URL: Transaction Pooler (port 6543) - for app queries in serverless
# CRITICAL: Must include ?pgbouncer=true for Vercel serverless compatibility
# Get from Supabase Dashboard → Connect → Transaction pooler
DATABASE_URL="postgresql://postgres.[project-ref]:[password]@aws-0-us-east-1.pooler.supabase.com:6543/postgres?pgbouncer=true"

# DIRECT_URL: Session Pooler (port 5432) - for migrations only
# Get from Supabase Dashboard → Connect → Session pooler
DIRECT_URL="postgresql://postgres.[project-ref]:[password]@aws-0-us-east-1.pooler.supabase.com:5432/postgres"

# ============================================
# STORAGE (Supabase Storage)
# ============================================
# Get these from Supabase Dashboard → Settings → API
NEXT_PUBLIC_SUPABASE_URL="https://[project-ref].supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# ============================================
# AUTHENTICATION (Clerk)
# ============================================
# Get these from Clerk Dashboard → API Keys
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="pk_test_xxx"
CLERK_SECRET_KEY="sk_test_xxx"

# Clerk Webhook Secret (for syncing users to database)
# Get from Clerk Dashboard → Webhooks → Your endpoint → Signing Secret
# Webhook URL: https://your-domain.vercel.app/api/webhooks/clerk
# Events: user.created, user.updated, user.deleted
CLERK_WEBHOOK_SECRET="whsec_xxx"

# Clerk URLs
NEXT_PUBLIC_CLERK_SIGN_IN_URL="/sign-in"
NEXT_PUBLIC_CLERK_SIGN_UP_URL="/sign-up"
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL="/dashboard"
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL="/onboarding"

# ============================================
# QUEUE (Upstash Redis)
# ============================================
# Get from Upstash Console → Your Database → Details
# Use "rediss://" (with double 's') for TLS
REDIS_URL="rediss://default:[password]@[region]-[id].upstash.io:6379"

# ============================================
# PAYMENTS (Stripe)
# ============================================
# Get these from Stripe Dashboard → Developers → API Keys
STRIPE_SECRET_KEY="sk_test_xxx"
STRIPE_PUBLISHABLE_KEY="pk_test_xxx"
STRIPE_WEBHOOK_SECRET="whsec_xxx"

# ============================================
# AI (Anthropic Claude for SPARK)
# ============================================
# Get from Anthropic Console → API Keys
ANTHROPIC_API_KEY="sk-ant-xxx"

# ============================================
# APP CONFIGURATION
# ============================================
NEXT_PUBLIC_APP_URL="https://play.gameview.app"
NEXT_PUBLIC_STUDIO_URL="https://studio.gameview.app"

# Internal API URL for server-to-server calls
# In production, set to your Vercel URL
INTERNAL_API_URL="http://localhost:3000"

# Development override - set to "true" to bypass Clerk auth (NEVER in production!)
NEXT_PUBLIC_SKIP_AUTH="false"

# ============================================
# GPU PROCESSING (Modal)
# ============================================
# Get from Modal Dashboard → Settings → API Tokens
# Create a token and copy the full token string
MODAL_API_TOKEN="ak-xxx"

# Optional: Webhook secret for callback verification
PROCESSING_WEBHOOK_SECRET="your-secret-here"

# ============================================
# LEGACY: Self-hosted Processing Worker
# ============================================
# Only needed if NOT using Modal (self-hosted GPU server)
# ENGINE_API_KEY="gv_engine_xxx"
# GVCORE_CLI_PATH="/usr/local/bin/gvcore-cli"
# BRUSH_PATH="/opt/brush"
# WORK_DIR="/tmp/gv-processing"
# WORKER_CONCURRENCY="1"
